%----------------------------------------------------------------------------------------
%    PACKAGES AND THEMES
%----------------------------------------------------------------------------------------

\documentclass[aspectratio=169,xcolor=dvipsnames,10pt]{beamer}
\usetheme{SimplePlus}

\usepackage{hyperref}
\usepackage{graphicx} % Allows including images
\usepackage{booktabs} % Allows the use of \toprule, \midrule and \bottomrule in tables
\usepackage{bbm}
\usepackage{bm}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{tikz-cd}

\theoremstyle{definition}
\newtheorem{proposition}{Proposition}

\usepackage[square,numbers]{natbib}
\newcommand*{\QEDA}{\hfill\ensuremath{\blacksquare}}%
\newcommand*{\QEDB}{\hfill\ensuremath{\square}}%

%----------------------------------------------------------------------------------------
%    TITLE PAGE
%----------------------------------------------------------------------------------------

\title{Data Visualization From a Category Theory Perspective}
\subtitle{}

\author{Davi Sales Barreira, Asla Medeiros e SÃ¡}

\institute
{
    FGV - EMAp, IMPATech
}
\date{\today} % Date, can be changed to a custom date

%----------------------------------------------------------------------------------------
%    PRESENTATION SLIDES
%----------------------------------------------------------------------------------------
\setbeamertemplate{blocks}[default]
\setbeamercolor{block title}{fg=white, bg=RoyalBlue}
\setbeamercolor{block body}{fg=black, bg=white}

\begin{document}

\begin{frame}
    % Print the title page as the first slide
    \titlepage
\end{frame}

%------------------------------------------------
\section{Introduction to the Course}
\begin{frame}[fragile]{Motivation}
  Balance expressiveness and abstraction in data visualization
  frameworks.
	\vspace{3mm}
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=0.8\textwidth]{./figures/expressiveness.pdf}
		\end{center}
        % \caption{Rotated histogram aligned with second main PCA axis.}
		\label{fig:rotated-histogram}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Motivation}
    How can we represent complex visualizations without resorting to low-level specifications?
	\vspace{3mm}
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=0.45\textwidth]{./figs/pca.pdf}
		\end{center}
        \caption{Rotated histogram aligned with second main PCA axis.}
		\label{fig:rotated-histogram}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Motivation}
    How can we represent complex visualizations without resorting to low-level specifications?
	\vspace{3mm}
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=1.\textwidth]{./figs/moritz.pdf}
		\end{center}
        \caption{OECD Better Life Index visualization \citet{oecd}.}
		\label{fig:rotated-histogram}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Overview}
    \begin{itemize}
        \item \textbf{Day 1}: Basics of Category Theory
        \item \textbf{Day 2}: Programming with Category Theory
        \item \textbf{Day 3}: Data Visualization Theory
        \item \textbf{Day 4}: Data Visualization + Categorical Programming
    \end{itemize}
\end{frame}
%------------------------------------------------

\begin{frame}{Table of contents}
	% \setbeamertemplate{section in toc}[sections numbered]
	% \setbeamertemplate{subsection in toc}[subsections numbered]
	% \setbeamerfont{subsection in toc}{size=\small}
	% \tableofcontents[sectionstyle=show, subsectionstyle=show]
    \begin{enumerate}
        \item What are Categories?
        \item Examples of Categories
        \item Universal Constructions
        \item Functors
        \item Natural Transformations
        \item Monoids and Monads
        \item F-Algebras and F-Coalgebras
    \end{enumerate}
\end{frame}

\section{Category Theory}
\begin{frame}[fragile]{Why Category Theory?}
	\textbf{Category Theory} is a branch of mathematics that
	studies general abstract structures through their relationships.
	\vspace{3mm}

	\textbf{Origin: }Samuel Eilenberg e Saunders Mac Lane - 1940
	\vspace{3mm}

	As pointed by \citet{fong2019invitation}, Category Theory is unmatched
	in its ability to organize and relate abstractions.

	\vspace{3mm}
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=0.40\textwidth]{./figures/category-triad.pdf}
		\end{center}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{What are Categories?}
	Category Theory is a branch of mathematics that
	studies general abstract structures through their relationships.

	\begin{definition}[Category]
        \begin{itemize}
            \item A collection of objects $\mathrm{Ob}_{\mathcal{C}}$.
            \item A collection of morphisms $\mathrm{Hom}_{\mathcal{C}}$, where each morphism has a source object and a target object. $\mathrm{Hom}_{\mathcal{C}}(A, B)$ is the collection of morphisms going from object $A$ to object $B$.
            \item A binary operation $\circ : \mathrm{Hom}_{\mathcal{C}}(A, B) \times \mathrm{Hom}_{\mathcal{C}}(B, C) \to \mathrm{Hom}_{\mathcal{C}}(A, C)$ such that:
            \begin{enumerate}
                \item \textbf{Associative}: $(h \circ g) \circ f = h \circ (g \circ f)$.
                \item \textbf{Identity}: Every object has an identity morphism $1_A \in \mathrm{Hom}_{\mathcal{C}}(A, A)$.
            \end{enumerate}
        \end{itemize}
	\end{definition}
\end{frame}

\begin{frame}[fragile]{What are Categories?}

    \begin{definition}[Small and Locally Small Category]
        A category $\mathcal C$ is \textit{small} if $\text{Ob}_\mathcal C$ and
        $\text{Hom}_\mathcal C$ are sets. A category $\mathcal C$ is \textit{locally small} if
        for any $A, B \in \text{Ob}_\mathcal C$, then
        $\text{Hom}_\mathcal C(A,B)$ is a set. Note that a small category is also locally small.
    \end{definition}

    Note that when talking about $\text{Ob}_\mathcal C$ and $\text{Hom}_\mathcal C$, we didn't say
    that they were sets, instead we called them \textit{classes}. The reason for
    this lies in the foundations of Set Theory. There are collections in mathematics
    that are ``larger'' than sets, e.g. the ``set'' of all sets, which itself cannot be a set,
    otherwise it would incur in a paradox (Russell's Paradox). A way to deal
    with this is making a distinction between classes and sets.
    This point is quite technical; readers interested in understanding this nuance can check books such as \citet{borceux1994handbook}.
\end{frame}

\begin{frame}[fragile]{Examples of Categories}
    The category $\mathbf{1}$ consists of $\text{Ob}_{\mathbf{1}} := \{A\}$ and $\mathrm{Hom}_{\mathbf{1}} = \mathrm{id}_A$.

	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=1.0\textwidth]{./figs/1Cat.pdf}
		\end{center}
	\end{figure}

\end{frame}

\begin{frame}[fragile]{Examples of Categories}
	The category $\bm 2$ consists of $\text{Ob}_{\bm 2} := \{A, B\}$ and $\text{Hom}_{\bm 1} = \{id_A, id_B, f\}$,
	where $f:A \to B$.
	The diagram for such category is shown below.
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=1.00\textwidth]{./figs/2Cat.pdf}
		\end{center}
		\caption{Category $\bm 2$.}
		\label{fig:2Cat}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Examples of Categories}
	The category $\bm 3$ has three morphisms besides the identities. The morphisms are
	$f$, $g$ and their composition $g \circ f$. The figure below
	illustrates the category with all its morphisms.
	\bigskip
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=1.00\textwidth]{./figs/3Cat.pdf}
		\end{center}
		\caption{Category $\bm 3$ showing all morphisms.}
		\label{fig:3Catcomplete}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Examples of Categories}
    When drawing categories, it is common to omit
    the identity and/or composition morphism. From here on,
    we do the same, whenever the context is clear.
	\bigskip
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=1.00\textwidth]{../notebooks/3Catsimple.pdf}
		\end{center}
		\caption{Category $\bm 3$ omitting morphisms.}
		\label{fig:3Catcomplete}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Examples of Categories}
	The discrete category $\mathbf{\underline{N}}$ is the category with $N$ objects
    and $\text{Hom}_{\mathbf{\underline{N}}} := \{id_1,...,id_N\}$. An example of this category is
	illustrated below.
	\bigskip
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=0.80\textwidth]{../notebooks/DiscreteCategory.pdf}
		\end{center}
        \caption{Category $\mathbf{\underline{N}}$.}
		\label{fig:3Catcomplete}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Examples of Categories}
        Given a category \(\mathcal{C}\) and an object \(S\) of this category, we can define a slice category \(\mathcal{C} / S\), where:
        \begin{itemize}
            \item The objects are tuples \((A, f)\) where \(A\) is an object in \(\mathcal{C}\) and \(f: A \to S\) is a morphism.
            \item A morphism \(\varphi_{(A, B)} : (A, f) \to (B, g)\) is equivalent to a morphism \(\varphi \in \text{Hom}_{\mathcal{C}}(A, B)\) such that \(f = g \circ \varphi\).
        \end{itemize}
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=0.70\textwidth]{./figs/SliceCategory.pdf}
		\end{center}
		\caption{Example of slice category.}
		\label{fig:slice}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Examples of Categories}
    \begin{definition}[Subcategory]
        Let $\mathcal C$ be a category. A \textit{subcategory} $\mathcal S$ of $\mathcal C$ is such that
        \begin{enumerate}[(i)]
            \item $\text{Ob}_\mathcal S \subseteq \text{Ob}_\mathcal C$;
            \item For every $A,B \in \text{Ob}_\mathcal S$, we have $\text{Hom}_\mathcal S(A,B) \subseteq \text{Ob}_\mathcal C(A,B)$;
            \item Composition and identity in $\mathcal S$ are the same as in $\mathcal C$, restricted to morphisms and objects of $\mathcal S$.
        \end{enumerate}

        A subcategory $\mathcal S$ is said to be \textit{wide} if $\text{Ob}_\mathcal S = \text{Ob}_\mathcal C$,
        and it is said to be \textit{full} if for every $A,B \in \text{Ob}_\mathcal S$, then 
        $\text{Hom}_\mathcal S(A,B) = \text{Hom}_\mathcal C(A,B)$.
        % Finally, a subcategory is \textit{thin} if
        % for every $A,B \in \text{Ob}_\mathcal S$ the set $\text{Hom}_\mathcal S(A,B)$ has only a single morphism.
    \end{definition}
\end{frame}

\begin{frame}[fragile]{Examples of Categories}
    \begin{definition}[Dual Category]
        Given a category $\mathcal C$, the dual (opposite) category $\mathcal C^{op}$ is defined as:
        \begin{itemize}
            \item $\text{Ob}_{\mathcal C^{op}} = \text{Op}_\mathcal C$;
            \item For every morphism $f:A\to B$ in $\mathcal C$, have an equivalent morphism $f^{op}:B \to A$ in $\mathcal C^{op}$;
            \item The composition in $\mathcal C^{op}$ satisfies $f^{op} \circ g^{op} = (g \circ f)^{op}$.
        \end{itemize}
    \end{definition}
	\begin{figure}[H]
		\begin{center}
			\includegraphics[width=0.35\textwidth]{../notebooks/DualCategory.pdf}
		\end{center}
		\caption{Example of dual category.}
		\label{fig:dual}
	\end{figure}
\end{frame}

\begin{frame}[fragile]{Examples of Categories}
	Here are some more interesting
	categories:
	\begin{enumerate}[1.]
		\item $\mathbf{Set}$ which is the category of sets, where the objects are sets and the morphisms are functions between sets.
		\item $\mathbf{Top}$ is the category where topological spaces are the objects and continuous functions are the morphisms.
		\item $\mathbf{Vec}_\mathbb F$ is the category where vector spaces over field $\mathbb F$ are the objects,
		      and linear transformations are the morphisms.
		\item $\mathbf{Mon}$ is the category of monoids, where morphisms are monoid homormophisms.
	\end{enumerate}
\end{frame}

\begin{frame}[fragile]{Isomorphisms, monomorphism and epimorphism}
    A very important definition in Category Theory is the notion of isomorphism. In Set Theory,
    we say that two sets are isomorphic if there is a bijective function between them. Yet, this
    concept is not restricted to Set Theory and can be generalized in Category Theory as follows:
	\begin{definition}[Categorical Isomorphism]
        Let $\mathcal C$ be a category with $X,Y \in Ob_\mathcal C$ and $f \in \text{Hom}_\mathcal C (X,Y)$.
        \begin{enumerate}[(i)]
            \item We say that $f$ is \textit{left invertible} if there exists $f_l \in \text{Hom}_\mathcal C (Y,X)$ such
                  that $f_l \circ f = id_X$;
              \item We say that $f$ is \textit{right invertible} if there exists $f_r \in \text{Hom}_\mathcal C (Y,X)$ such
                  that $f \circ f_r = id_Y$;
            \item We say that $f$ is invertible if it's both left and right invertible.
        \end{enumerate}
	\end{definition}
    \textbf{Exercise}: Prove that in the category $\mathbf{Set}$, the categorical isomorphism is equivalent to
    the set theoretic isomorphism.
\end{frame}

% \begin{frame}[fragile]{Isomorphisms, monomorphism and epimorphism}
%     A very important definition in Category Theory is the notion of isomorphism. In Set Theory,
%     we say that two sets are isomorphic if there is a bijective function between them. Yet, this
%     concept is not restricted to Set Theory and can be generalized in Category Theory as follows:
% 	\begin{definition}[Categorical Isomorphism]
%         Let $\mathcal C$ be a category with $X,Y \in Ob_\mathcal C$ and $f \in \text{Hom}_\mathcal C (X,Y)$.
%         \begin{enumerate}[(i)]
%             \item We say that $f$ is \textit{left invertible} if there exists $f_l \in \text{Hom}_\mathcal C (Y,X)$ such
%                   that $f_l \circ f = id_X$;
%               \item We say that $f$ is \textit{right invertible} if there exists $f_r \in \text{Hom}_\mathcal C (Y,X)$ such
%                   that $f \circ f_r = id_Y$;
%             \item We say that $f$ is invertible if it's both left and right invertible.
%         \end{enumerate}
% 	\end{definition}
%     \begin{proof}
%         Let $f: A \to B$ be a morphism in $\mathbf{Set}$. We will show that $f$ is a categorical isomorphism if and only if it is a bijection.

%         \textbf{(â¹) If $f$ is a categorical isomorphism, then $f$ is a bijection.}  

%         Since $f$ is an isomorphism, there exists a morphism $g: B \to A$ such that:
%         \[
%         g \circ f = \text{id}_A, \quad f \circ g = \text{id}_B.
%         \]

%         - \textit{$f$ is injective}: Suppose $f(x) = f(y)$. Applying $g$ to both sides, we get  
%           \[
%           g(f(x)) = g(f(y)).
%           \]  
%           Since $g \circ f = \text{id}_A$, this simplifies to  
%           \[
%           x = y.
%           \]  
%           Thus, $f$ is injective.  

%         - \textit{$f$ is surjective}: For every $b \in B$, we have  
%           \[
%           f(g(b)) = \text{id}_B(b) = b.
%           \]  
%           This shows that every element of $B$ has a preimage in $A$, proving that $f$ is surjective.  

%         Since $f$ is both injective and surjective, it is a bijection.

%         \textbf{(â¸) If $f$ is a bijection, then it is a categorical isomorphism.}  

%         Since $f$ is a bijection, it has an inverse function $f^{-1}: B \to A$ such that  
%         \[
%         f^{-1} \circ f = \text{id}_A, \quad f \circ f^{-1} = \text{id}_B.
%         \]  
%         This precisely means that $f$ is an isomorphism in the categorical sense.

%         Thus, we have shown that a categorical isomorphism in $\mathbf{Set}$ is the same as a bijection. $\square$
%     \end{proof}
% \end{frame}
% \begin{frame}[fragile]{Isomorphisms, monomorphism and epimorphism}
%     A partially ordered set (poset) is defined by a tuple $(P, \leq)$, where $P$ is a set of values and
%     $\leq$ is a binary relation satisfying reflexivity, antisymmetry and transitivity.
%     \begin{enumerate}[(i)]
%         \item For $a,b \in P$, if $a\leq b$ and $b \leq c$, then $a \leq c$;
%         \item For every $a \in P$, $a \leq a$.
%     \end{enumerate}

%     The \textbf{Poset} category has partially ordered sets as objects and monotone maps as morphisms,
%     i.e., maps $f : X \to Y$, such that for each $x, x' \in X$ with $x \leq x'$ in $X$, we have $f(x) \leq f(x')$ in $Y$.

% \end{frame}

\begin{frame}[fragile]{Isomorphisms, monomorphism and epimorphism}
	\begin{definition}[Monomorphism]
        In a given category $\mathcal C$, a morphism $m:X\to Y$ is said to be a monomorphism (monic),
        if for every $A \in \text{Ob}_\mathcal C$ and $f,g:A \to X$ we have that:
        $$
        m\circ f = m\circ g \implies f = g.
        $$
	\end{definition}
	\begin{definition}[Epimorphism]
        In a given category $\mathcal C$, a morphism $e:X\to Y$ is said to be an epimorphism (epic),
        if for every $A \in \text{Ob}_\mathcal C$ and $f,g:A \to X$ we have that:
        $$
        f \circ e = g \circ e \implies f = g.
        $$
	\end{definition}
\end{frame}

\begin{frame}[fragile]{Isomorphisms, monomorphism and epimorphism}
    \begin{proposition}
        The following properties on monomorphism and epimorphism are true:
        \begin{enumerate}[1.]
            \item $f$ left-invertible $\implies$ $f$ is monic. The converse is not true.
            \item $f$ right-invertible $\implies$ $f$ is epic. The converse is not true.
            \item $f$ invertible $\implies$ $f$ is monic and epic. The converse is not true.
            \item $f$ monic and right-invertible $\implies $ $f$ is isomorphism.
            \item $f$ epic and left-invertible $\implies $ $f$ is isomorphism.
        \end{enumerate}
    \end{proposition}
    \begin{proof}
        Left as exercise.
    \end{proof}
\end{frame}

% \begin{frame}[fragile]{Isomorphisms, monomorphism and epimorphism}
%     \begin{proposition}
%         The following properties on monomorphism and epimorphism are true:
%         \begin{enumerate}[1.]
%             \item $f$ left-invertible $\implies$ $f$ is monic. The converse is not true.
%             \item $f$ right-invertible $\implies$ $f$ is epic. The converse is not true.
%             \item $f$ invertible $\implies$ $f$ is monic and epic. The converse is not true.
%             \item $f$ monic and right-invertible $\implies $ $f$ is isomorphism.
%             \item $f$ epic and left-invertible $\implies $ $f$ is isomorphism.
%         \end{enumerate}
%     \end{proposition}
%     \begin{proof}
%         1. Note $f:A \to B$ left-invertible implies that there exists a $f_l:B \to A$ such that
%         $f_l \circ f = id$. Hence, for a $g:B\to C$ and $h: B \to C$, if
%         \begin{displaymath}
%             f \circ g = f \circ h,
%         \end{displaymath}
%         then we have that
%         \begin{displaymath}
%             f_l \circ f \circ g = f_l \circ f \circ h \implies g =h.
%         \end{displaymath}
%         To show that the converse is false, consider the category $\mathbf{2}$ (Figure \ref{fig:2Cat}). Note that
%         $f:A\to B$ is monic, since the only morphism that composes with $f$ is
%         $id_A$ and $id_B$. Yet, note that $f$ is not left invertible, since there isn't even
%         a morphism from $B$ to $A$.

%         2. Use the same argument, but reversing the order of the compositions.
%         For the converse, again consider the same category $\mathbf{2}$. Note that
%         $f:A\to B$ is epic, but it's not right invertible.

%         3. True since invertible means left and right invertible.

%         4. Since $f:A \to B$ right invertible, then there exists $f_r:B \to A$
%         such that $f \circ f_r = id_B$. Thus,
%         \begin{displaymath}
%             id_B \circ f = (f \circ f_r) \circ f =
%             f \circ (f_r \circ f) =
%             f \circ id_A \implies f_r \circ f = id_A.
%         \end{displaymath}
%         5. Same argument.
%     \end{proof}
% \end{frame}

\begin{frame}[fragile]{Universal Constructions}
	Objects defined in terms of existence and
	uniqueness of morphisms are known as \textbf{universal constructions}.
	\begin{definition}[Zero, Initial and Terminal]
		Let $\mathcal C$ be a category.
		\begin{enumerate}[1.]
			\item An object $I \in \text{Ob}_\mathcal C$ is \textit{initial} if for every $A \in \text{Ob}_\mathcal C$,
			      there is exactly one morphism from $I$ to $A$. Thus, from $I$ to $I$ there is only the identity.
			\item An object $T \in \text{Ob}_\mathcal C$ is \textit{terminal} if for every $A \in \text{Ob}_\mathcal C$,
			      there is exactly one morphism from $A$ to $T$. Thus, from $I$ to $I$ there is only the identity.
			\item An object is \textit{zero} if it is both terminal and initial.
		\end{enumerate}
	\end{definition}
\end{frame}


\begin{frame}[fragile]{Universal Constructions}
    \begin{theorem}
        Every \textit{initial} object is unique up to an isomorphism, i.e. if in a category there
        are two \textit{initial} objects, then they are isomorphic.
        Similarly, \textit{terminal} objects are unique up to an isomorphism.
        Moreover, the isomorphism is unique between initial object, and between terminal objects.
    \end{theorem}
    \begin{proof}
        Left as exercise.
    \end{proof}
\end{frame}

% \begin{frame}[fragile]{Universal Constructions}
%     \begin{theorem}
%         Every \textit{initial} object is unique up to an isomorphism, i.e. if in a category there
%         are two \textit{initial} objects, then they are isomorphic.
%         Similarly, \textit{terminal} objects are unique up to an isomorphism.
%         Moreover, the isomorphism is unique between initial object, and between terminal objects.
%     \end{theorem}
%     \begin{proof}
%         Let $I_1, I_2$ be initial. Then, there exists only $f:I_1 \to I_2$ and $g:I_2 \to I_1$.
%         But since $g \circ f:I_1 \to I_1$ is a morphism from the initial object $I_1$, it must
%         be equal to $id_{I_1}$. The same for $I_2$, which implies that $f$ and $g$ are inverses,
%         and thus the objects are isomorphic. Since both $f$ and $g$ are the only morphisms from
%         $I_1$ and $I_2$, this also implies that their are the only isomorphism.
%         The same proof works for terminal objects.
%     \end{proof}
% \end{frame}

\begin{frame}[fragile]{Universal Constructions}
    In Set Theory, we are used to the notion of a Cartesian product.
    Similarly to how we did for isomorphism, the idea of a product can be generalized via Category Theory
	\begin{definition}[Span]
        Let $A,B$ be objects in a  category $\mathcal C$. A span
        on $A$ and $B$ is a triple $(Z,f,g)$ where $f:Z\to A$ and
        $g:Z\to B$ are morphisms in $\mathcal C$.
	\end{definition}
    \[\begin{tikzcd}
        & Z \\
        A && B \\
        \arrow["f"', from=1-2, to=2-1]
        \arrow["g", from=1-2, to=2-3]
    \end{tikzcd}\]
\end{frame}

\begin{frame}[fragile]{Universal Constructions}
    \begin{definition}[Categorical Product]
        Let $A,B$ be objects in a  category $\mathcal C$. A span $(A\times B, \pi_1, \pi_2)$
        is called a product between $A$ and $B$ if for every span $(Z, f, g)$ of $A$ and $B$,
        there exists a unique morphism $h_{f,g}:Z \to A \times B$ such that
        $\pi_1 \circ h_{f,g} = f$ and $\pi_2 \circ h_{f,g} = g$.
    \end{definition}
    \[\begin{tikzcd}
        & Z \\
        A && B \\
        & {A \times B}
        \arrow["f"', from=1-2, to=2-1]
        \arrow["g", from=1-2, to=2-3]
        \arrow["{h_{f,g}}"{description}, dashed, from=1-2, to=3-2]
        \arrow["{\pi_1}"', from=3-2, to=2-1]
        \arrow["{\pi_2}", from=3-2, to=2-3]
    \end{tikzcd}\]
    \textbf{Exercise:} Prove that the categorical product is equivalent to Cartesian product in $\mathbf{Set}$.
\end{frame}

\begin{frame}[fragile]{Universal Constructions}
    Given the Categorical Product, we can think of a dual concept, called coproduct.
	\begin{definition}[Cospan]
        Let $A,B$ be objects in a  category $\mathcal C$. A span
        on $A$ and $B$ is a triple $(Z,f,g)$ where $f:A\to Z$ and
        $g:B\to Z$ are morphisms in $\mathcal C$.
	\end{definition}
    \[\begin{tikzcd}
        & Z \\
        A && B \\
        \arrow["f", from=2-1, to=1-2]
        \arrow["g"', from=2-3, to=1-2]
    \end{tikzcd}\]
\end{frame}

\begin{frame}[fragile]{Universal Constructions}
    \begin{definition}[Categorical Coproduct]
        Let $A,B$ be objects in a  category $\mathcal C$. A cospan $(A + B, \pi_1, \pi_2)$
        is called a coproduct between $A$ and $B$ if for every cospan $(Z, f, g)$ of $A$ and $B$,
        there exists a unique morphism $l_{f,g}:Z \to A + B$ such that
        $h_{f,g} \circ i_1 = f$ and $h_{f,g} \circ i_2 = g$.
    \end{definition}
    \[\begin{tikzcd}
        & Z \\
        A && B \\
        & {A + B}
        \arrow["{h_{f,g}}"{description}, dashed, from=1-2, to=3-2]
        \arrow["f", from=2-1, to=1-2]
        \arrow["{i_1}"', from=2-1, to=3-2]
        \arrow["g"', from=2-3, to=1-2]
        \arrow["{i_2}", from=2-3, to=3-2]
    \end{tikzcd}\]
\end{frame}

\begin{frame}[fragile]{Set Category}
    Here are some more properties related to $\mathbf{Set}$:
    \begin{itemize}
        \item Initial object: $\varnothing$;
        \item Terminal object: any singleton set up to isomorphism;
        \item For any two objects $A$ and $B$, the $\text{Hom}(A,B)$ is also an object (called exponential object $B^A$);
        \item Monomorphisms are equivalent to injective functions;
        \item Epimorphisms are equivalent to surjective functions.
        \item Categorical products are equivalent to Cartesian products;
        \item Categorical coproducts are equivalent to the disjoint unions.
    \end{itemize}
\end{frame}


\begin{frame}[fragile]{Functors}
	\begin{definition}[Functor]
        A functor $F: \mathcal C \to \mathcal D$ consists of:
        \begin{itemize}
            \item A mapping between objects: $F: \text{Ob}_\mathcal C \to \text{Ob}_\mathcal D$.
            \item A mapping between morphisms:
            \begin{itemize}
                \item Covariant: $F(f): F(A) \to F(B)$, for $f: A \to B$.
                \item Contravariant: $F(f): F(B) \to F(A)$, for $f: A \to B$.
            \end{itemize}
            \item Identity preservation: $F(id_A) = id_{F(A)}$.
            \item Composition preservation: 
            \begin{itemize}
                \item Covariant: $F(g \circ f) = F(g) \circ F(f)$.
                \item Contravariant: $F(g \circ f) = F(f) \circ F(g)$.
            \end{itemize}
        \end{itemize}
    \end{definition}
\end{frame}


\begin{frame}[fragile]{Functors}
	\begin{definition}[Functor]
		Let $\mathcal C$ and $\mathcal D$ be two categories. A functor $F: \mathcal C \to \mathcal D$ is
		a pair of mappings with the following properties:
		\begin{figure}[H]
			\begin{center}
				\includegraphics[width=0.6\textwidth]{./figs/Functor.pdf}
			\end{center}
			\caption{Diagrams showcasing the properties of functors.}
			\label{fig:Functor}
		\end{figure}
	\end{definition}

\end{frame}

\begin{frame}[fragile]{Examples of Functors}
    \begin{definition}[Power set functor]
        The power-set functor $\mathcal P : \mathbf{Set} \to \mathbf{Set}$ sends a set $A$
        to its power set $\mathcal P (A)$, and sends $f:A\to B$ to 
        $\mathcal P f : \mathcal P(A) \to \mathcal P(B)$, where given $X \in \mathcal P (A)$:
        $$
            \mathcal P f (X) = \{f(x) : x \in X\}.
        $$

        \textbf{Exercise:} Show that this is indeed a (covariant) functor.
    \end{definition}
\end{frame}

\begin{frame}[fragile]{Examples of Functors}
    \begin{definition}[Inverse Image Functor]
        An example of \textbf{contravariant} functor is the inverse image functor
        $Im : \mathbf{Set} \to \mathbf{Set}$, which sends a set $A$ to its
        power-set $\mathcal P(A)$, but sends $f:A\to B$ to the inverse image of $f$, i.e.
        for any $Y \subset B$ we have:
        $$
            Im \ f(Y) = f^{-1}(Y) := \{x \in A : f(x) \in Y\}.
        $$
        Note that the inverse image satisfy the contravariant property
        \begin{displaymath}
            Im(f \circ g) = (f \circ g) ^{-1} = g^{-1} \circ f^{-1} = Im \ g \circ Im \ f.
        \end{displaymath}
        Also, for $id_A: A \to A$, we have
        \begin{displaymath}
            Im(id_A) = id_{\mathcal P (A)}.
        \end{displaymath}
    \end{definition}
\end{frame}

\begin{frame}[fragile]{Examples of Functors}
    \begin{definition}[Group Homormophism as Functors]
    In abstract algebra, a group is a triple $(G, \cdot, e)$, where $G$ is a set,
    $\cdot : G \times G \to G$ is the product mapping which is associative and has an inverse,
    and $e \in G$ is the identity element.

	\vspace{3mm}
    We can \textit{categorify} groups (also called delooping \citep{perrone2024starting}),
    i.e. we can interpret them as categories. Define a category $\mathbf B G$ as containing a single
    object $G$, the elements of $G$ are the morphisms, i.e. for $g \in G$ we have $g:G\to G$.
    Morphism composition is given by $\cdot$, hence $g_1 \cdot g_2 \equiv g_1 \circ g_2$.

	\vspace{3mm}
    Let $(G, \cdot_G, e_G)$ and $(H, \cdot_H, e_H)$ be two groups. A function
    $f:G \to H$ is a homomorphism between $G$ and $H$ if 
    for every $g_1, g_2 \in G$ we have:

    $$f(g_1 \cdot_G g_2) = f(g_1) \cdot_H f(g_2),$$

    Note that this is exactly the definition of a functor $F:\mathbf B G \to \mathbf B H$.
    This is actually by design, as functors are effectively \textit{homormophisms between categories}
    \citep{ncatlabfunctor}.
    \end{definition}
\end{frame}

% \begin{frame}[fragile]{Examples of Functors}

%     The \textit{free-set functor} is another common example of a functor from $\mathbf{Set}$ to itself. It assigns to each set $A$ the set of all finite sequences of elements from $A$, often called the free monoid on $A$. This functor is denoted by:
%     \[
%     \mathbf{Set} \xrightarrow{\text{Free}} \mathbf{Set}.
%     \]
%     For any set $A$, the free-set functor maps $A$ to the set of all finite sequences of elements of $A$. For any function $f: A \to B$, the functor maps $f$ to the function that extends $f$ to sequences:
%     \[
%     \text{Free}(f)(\mathbf{a}_1, \mathbf{a}_2, \dots, \mathbf{a}_n) = (f(\mathbf{a}_1), f(\mathbf{a}_2), \dots, f(\mathbf{a}_n)).
%     \]
%     This functor also respects composition and identity morphisms.
% \end{frame}

\begin{frame}[fragile]{Examples of Functors}

    \begin{definition}[Functor Composition and Identity]
        For two functors $F:\mathcal C \to \mathcal D$
        and $G:\mathcal D \to \mathcal E$, then $G \circ F$ is
        a functor from $\mathcal C$ to $\mathcal E$ where
        \begin{enumerate}[(i)]
            \item For any $A \in Ob_\mathcal C$, $G\circ F (A) = G(F(A))$,
            \item For any $f \in \text{Hom}_\mathcal C$, $G\circ F (f) = G(F(f))$.
        \end{enumerate}

        We also have identity functors, denoted by $1_\mathcal C : \mathcal C \to \mathcal C$,
        where:
        \begin{enumerate}[(i)]
            \item $1_\mathcal C (A) = A \in \text{Ob}_\mathcal C$;
            \item $1_\mathcal C (f) = f \in \text{Hom}_\mathcal C$.
        \end{enumerate}
    \end{definition}
\end{frame}

\begin{frame}[fragile]{Natural Transformations}
	\begin{definition}[Natural Transformations]
		Let $\mathcal C$ and $\mathcal D$ be categories, and let $F,G:\mathcal C \to \mathcal D$ be functors.
		A natural transformation $\alpha: F \to G$ is such that the following diagram commutes:
		\begin{figure}[H]
			\begin{center}
				\includegraphics[width=0.60\textwidth]{./figs/NaturalTransformation.pdf}
			\end{center}
			\caption{Commutative diagram of a natural transformation highlighting the commutative property of the definition.}
			\label{fig:NaturalTransformation}
		\end{figure}
	\end{definition}
\end{frame}

\begin{frame}[fragile]{Natural Transformations}
    \begin{definition}[Vertical Composition]
        Let $\alpha: F \to G$ and $\beta: G \to H$ be natural transformations
        where $F$, $G$ and $H$ are functors from $\mathcal C$ to $\mathcal D$.
        We can define a vertical composition between them by making
        $(\beta \circ \alpha)_A = \beta_A \circ \alpha_A$ for every object $A \in \text{Ob}_\mathcal C$.
        One can check that this composition is associative.
        The vertical composition is shown below.
    \end{definition}

    \begin{figure}[H]
        \begin{center}
            \includegraphics{../notebooks/VerticalComposition.pdf}
        \end{center}
        \caption{Vertical composition of natural transformations.}
        \label{fig:verticalcomp}
    \end{figure}
\end{frame}

\begin{frame}[fragile]{Natural Transformations}
    \begin{definition}[Horizontal Composition]
        Let $\alpha: F \to G$ and $\beta: H \to K$ be natural transformations
        where $F, G: \mathcal C \to \mathcal D$ and $H, K: \mathcal D \to \mathcal F$.
        We can define a horizontal composition between them by making
        \begin{displaymath}
            (\beta * \alpha)_A = \beta_{GA} \circ H(\alpha_A) =  K(\alpha_A) \circ \beta_{FA}.
        \end{displaymath}
        Hence, this defines a natural transformation
        \begin{displaymath}
            \beta * \alpha: H \circ F \to K \circ G
        \end{displaymath}
        The horizontal composition is illustrated below.
    \end{definition}

    \begin{figure}[H]
        \begin{center}
            \includegraphics[width=0.60\textwidth]{../notebooks/HorizontalComposition.pdf}
        \end{center}
        \caption{Horizontal composition of natural transformations.}
        \label{fig:horizontalcomp}
    \end{figure}
\end{frame}

\begin{frame}[fragile]{Natural Transformations}
    \begin{definition}[Category of Functors]
        For a small category $\mathcal C$ and a category $\mathcal D$,
        denote $\mathcal D^{\mathcal C}$ as the category of functors
        from $\mathcal C$ to $\mathcal D$ where objects are functors, morphisms are natural transformations,
        i.e.
        \begin{displaymath}
            \text{Ob}_{\mathcal D^{\mathcal C}} :={\text{Functors from } \mathcal C \text{ to } \mathcal D}
        \end{displaymath}
        \begin{displaymath}
            \text{Mor}_{\mathcal D^{\mathcal C}}(F,G) :={\text{Natural Transformations from }
            F \text{ to } G}.
        \end{displaymath}
        The identity morphism for a functor $F$ is the identity natural transformation $\text{id}_F$,
        and the composition is the vertical composition of natural transformations.
    \end{definition}
    An endofunctor is a functor $F:\mathcal C \to \mathcal C$, i.e. a functor that
    has the same category as domain and codomain. We call $\mathbf{End}_\mathcal C$ the
    category of endofunctors in $\mathcal C$, i.e. $\mathcal C^\mathcal C$.
\end{frame}

\begin{frame}[fragile]{Monoids and Monads}
	\textbf{Monoids} and \textbf{Monads} are two ubiquitous constructions both in Category Theory and
	Functional Programming. These two concepts will be used when talking about
	data visualization. Therefore, it is required of us to introduce these constructions.

	Let's start with the definition of a monoid in the context of Set Theory.

	\begin{definition}[Monoid - Set Theory]
		A monoid is a triple $(M, \otimes, e_M)$ where $M$ is a set, $\otimes:M\times M \to M$ is a binary operation
		and $e_M$ the neutral element, such that:
		\begin{enumerate}
			\item $a \otimes (b \otimes c) = (a \otimes b) \otimes c$
			\item $a \otimes e_M = e_M \otimes a = a$.
		\end{enumerate}
		\label{def:monoid}
	\end{definition}

	An example of a monoid is $(\mathbb N \cup \{0\}, +, 0)$.
	It is easy to check that the summation operator satisfies the
	associativity neutrality properties.
\end{frame}

\begin{frame}[fragile]{Monoids and Monads}
	\begin{definition}[Monoid in the  category $\mathbf{Set}$]
		A monoid in $\mathbf{Set}$ is a triple $(M, \mu, \eta)$, where $M \in \text{Ob}_\mathbf{Set}$,
		$\mu:M \times M \to M$ and $\eta: 1 \to M$ are two morphisms in $\mathbf{Set}$ satisfying the
		commutative diagrams below. Note that $1$ is the terminal object in $\mathbf{Set}$, i.e.
		the singleton set (which is unique up to an isomorphism).

		\begin{figure}[H]
			\begin{center}
				\includegraphics[width=0.7\textwidth]{./figs/MonoidalCategory.pdf}
			\end{center}
			\caption{Commutative diagram for monoid.}
			\label{fig:monoid-diagram}
		\end{figure}
		\label{def:monoid-cat}
	\end{definition}
\end{frame}

\begin{frame}[fragile]{Monoids and Monads}
	\begin{definition}[Monad]
		A monad is a monoid in $\mathbf{End}_\mathcal C$, which is the triple $(T, \mu, \eta)$,
		where $T:\mathcal C \to \mathcal C$ is a functor,
		$\mu:T \circ T \to T$ and $\eta: 1 \to T$ are natural transformations in $\mathbf{End}_\mathcal C$ satisfying the
		commutative diagrams below. Note that $1$ is the identity functor in $\mathcal{C}$.
		\begin{figure}[H]
			\begin{center}
				\includegraphics[width=0.7\textwidth]{../notebooks/Monad.pdf}
			\end{center}
			\caption{Commutative diagram for monad.}
			\label{fig:monad}
		\end{figure}
	\end{definition}
\end{frame}

\begin{frame}[fragile]{Monoids and Monads}
    Monads induce a category called \textit{Kleisli category}. Such category is of special interest
    in Functional Programming, where it is used to model computational effects.

    \begin{definition}[Kleisli Category]
        Let $(T, \mu, \eta)$ be a monad over a category $\mathcal C$. The Kleisli category
        is the category $\mathcal C_T$, where:
        \begin{enumerate}[(i)]
        \item $\text{Ob}_{\mathcal C_T} = \text{Ob}_{\mathcal C}$;
        \item $\text{Mor}_{\mathcal C_T}(A,B) = \text{Mor}_{\mathcal C}(A,TB)$;
        \item the composition of morphisms in $\mathcal C_T$ is given by:
            \begin{displaymath}
                g \circ_T f :=  \mu_C \circ T g \circ f,
            \end{displaymath}
        with $f:A \to T B$ and $g:B \to T C$ as morphisms in $\mathcal C$;
        \item the identity morphism of an object $A$ in $\mathcal C_T$ is $\eta:A\to TA$.
        \end{enumerate}
        In summary, the Kleisli category is defined in such a way that two morphisms
        $f:A \to TB$ and $g:B \to TC$ can be composed using $g \circ_T f:A \to TC$.
    \end{definition}
\end{frame}

\begin{frame}[fragile]{F-Algebras and F-Coalgebras}
    The informal idea of ``doing algebra'' is that we have an expression,
    such as $1 + 1$, and we want to evaluate this expression so that we
    get a single number, e.g. $1 + 1 = 2$. This concept of defining generic
    expressions and evaluating them can be expressed in Category Theory
    via the $F$-algebras:

    \begin{definition}[$F$-algebra]
        Let $F:\mathcal C \to \mathcal C$ be an endofunctor. An $F$-algebra is a tuple $(A,\phi)$, where:
        \begin{itemize}
            \item An object $A \in \mathcal C$, called \textit{carrier};
            \item A morphism $\phi : FA \to A$, called \textit{structure map}.
        \end{itemize}
    \end{definition}

    Note that for a fixed endofunctor $F$, we can define different algebras by picking
    different carriers or different structure maps.
\end{frame}

\begin{frame}[fragile]{F-Algebras and F-Coalgebras}
    Consider an endofunctor $F$ as:
    \begin{displaymath}
        (\cdot \times \cdot + 1):\mathbf{Set} \to \mathbf{Set},
    \end{displaymath}
    where $\times$ is the Cartesian product, $+$ is the disjoint union operator and $1$ is the terminal
    object in $\mathbf{Set}$, i.e. a generic singleton set $\{e\}$.

    We can then define an $F$-algebra $(\mathbb Z, \phi)$, where:
    \begin{gather*}
        \phi:(\mathbb{Z} \times \mathbb{Z} + \{e\}) \to \mathbb Z, \ \text{such that } \\
        \phi((a,b)) \mapsto a + b \\
        \phi(e) \mapsto 0.
    \end{gather*}
    What this means is that, for our specific $F$-algebra, an expression is a value of
    $F \mathbb Z = \mathbb{Z} \times \mathbb{Z} + \{e\}$, which is either a tuple of
    integers, or $e$. Our map $\phi$ evaluates expressions by either summing 
    the tuple of integers or returning $0$ for $e$.
\end{frame}


\begin{frame}[fragile]{F-Algebras and F-Coalgebras}
    For a fixed endofunctor $F$, we can define the category of $F$-algebras:
    \begin{definition}[Category of $F$-algebras]
        Let $F:\mathcal C \to \mathcal C$ be an endofunctor. The category of
        $F$-algebras, denoted by $\mathcal Alg(F)$,
        has $F$-algebras as objects, and algebra homomorphisms as morphisms.
        Given two $F$-algebras $(\phi, A)$ and $(\psi, B)$,
        a morphism $f:A \to B$ is an \textit{algebra homomorphism}
        between $(\phi, A)$ and $(\psi, B)$ if the diagram below commutes.
    \end{definition}

    \begin{figure}[H]
        \begin{center}
            \includegraphics[width=0.6\textwidth]{../notebooks/F-algebra.pdf}
        \end{center}
        \caption{Commutative diagram for $F$-algebra morphism.}
        \label{fig:falgebra}
    \end{figure}

\end{frame}

\begin{frame}[fragile]{F-Algebras and F-Coalgebras}
    \begin{definition}[Initial $F$-algebras]
        An initial $F$-algebra (if it exists) is an initial object in $\mathcal Alg(F)$.
        In other words, an initial $F$-algebra is a tuple $(I, in)$ with
        $in: F I \to I$, such that for any other $F$-algebra $(A, \phi)$,
        there exists a unique algebra homomorphism $cata_\phi: I \to A$,
        commonly called \textit{catamorphism} \citep{milewski2018category}.
    \end{definition}
    \begin{figure}[H]
        \begin{center}
            \includegraphics[width=0.6\textwidth]{../notebooks/cata.pdf}
        \end{center}
        \caption{Commutative diagram for $F$-algebra morphism.}
        \label{fig:falgebra}
    \end{figure}
\end{frame}

\begin{frame}[fragile]{F-Algebras and F-Coalgebras}
    \begin{definition}[Initial $F$-algebras]
        An initial $F$-algebra (if it exists) is an initial object in $\mathcal Alg(F)$.
        In other words, an initial $F$-algebra is a tuple $(I, in)$ with
        $in: F I \to I$, such that for any other $F$-algebra $(A, \phi)$,
        there exists a unique algebra homomorphism $cata_\phi: I \to A$,
        commonly called \textit{catamorphism} \citep{milewski2018category}.
    \end{definition}
    \begin{figure}[H]
        \begin{center}
            \includegraphics[width=0.6\textwidth]{../notebooks/cata.pdf}
        \end{center}
        \caption{Commutative diagram for $F$-algebra morphism.}
        \label{fig:falgebra}
    \end{figure}
\end{frame}

\begin{frame}[fragile]{F-Algebras and F-Coalgebras}
    \begin{theorem}[Lambek's Lemma]
        Let $F:\mathcal C \to \mathcal C$ be an endofunctor, and let
        $(I,in)$ be the initial $F$-algebra. Then, $in:F I \to I$ is an isomorphism,
        meaning that there exists an inverse morphism $in^{-1}:I \to F I$.
    \end{theorem}
    \begin{figure}[H]
        \begin{center}
            \includegraphics[width=0.6\textwidth]{../notebooks/catamorphism.pdf}
        \end{center}
        \caption{Commutative diagram for $F$-algebra morphism.}
        \label{fig:falgebra}
    \end{figure}
\end{frame}

\begin{frame}[fragile]{F-Algebras and F-Coalgebras}
    \begin{theorem}[Lambek's Lemma]
        Let $F:\mathcal C \to \mathcal C$ be an endofunctor, and let
        $(I,in)$ be the initial $F$-algebra. Then, $in:F I \to I$ is an isomorphism,
        meaning that there exists an inverse morphism $in^{-1}:I \to F I$.
    \end{theorem}
    \begin{proof}
        Left as exercise.
        \\
        \textbf{Step 1}. Prove that for the initial $F$-algebra $(I,in)$,
        for any other $F$-algebra $(I,a)$, we have $a = id_I$.
        \\
        \textbf{Step 2}. Since $(I,in)$ is initial, given the $F$-algebra
        $(FI,Fin)$, there exists a unique algebra homomorphism $h: I \to FI$.
        Prove that $in$ is the inverse of $h$.
    \end{proof}
\end{frame}
    % Depending on the endofunctor, the $\mathcal Alg(F)$ category might have an initial
    % object, called \textit{initial algebra}. As we have shown, initial objects
    % are unique up to an isomorphism, therefore, we can pick a single representative.
    % In this case, we use $(I,in)$ as the initial $F$-algebra. A result
    % known as Lambek's theorem, originally proved in \citep{lambek},
    % states that if $(I,in)$ is an initial algebra,
    % then $I \cong F I$ via $in$, i.e. $I$ is isomorphic to $FI$.
    % This theorem also implies that $I$ is the least fixed point of $F$.


%------------------------------------------------
\begin{frame}{References}
    \footnotesize
    \bibliography{reference.bib}
    \bibliographystyle{apalike}
\end{frame}

%------------------------------------------------

% \begin{frame}
%     \Huge{\centerline{\textbf{The End}}}
% \end{frame}

%----------------------------------------------------------------------------------------

\end{document}
